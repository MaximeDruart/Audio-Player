(this["webpackJsonpaudio-player"]=this["webpackJsonpaudio-player"]||[]).push([[0],{12:function(t,e,a){t.exports=a.p+"static/media/play.3d0531f4.svg"},233:function(t,e,a){},234:function(t,e,a){"use strict";a.r(e);var s=a(0),i=a.n(s),o=a(47),r=a.n(o),n=a(80),c=a(24),u=a(25),l=a(27),m=a(26),d=a(28),p=a(11),v=a(6),g=a.n(v),h=(a(110),a(81)),f=a(236),S=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(m.a)(e).call(this,t))).changeValue=function(t){var e=t.currentTarget,s=t.clientX,i=e.getBoundingClientRect(),o=i.width,r=s-i.x;r/=o;var n=Object(f.a)(0,1,a.props.startValue,a.props.endValue,r);return a.setState({currentValue:n,currentValuePercentage:100*r}),"samples"===a.props.stateProperty?a.getClosestPow2(n):n},a.getClosestPow2=function(t){var e,a=[2,4,8,16,32,64,128,256,512,1024,2048],s=1/0;return a.forEach((function(a,i){s>Math.abs(a-t)&&(s=Math.abs(a-t),e=i)})),a[e]},a.dragAndDrop=function(t){var e=t.currentTarget,s=t.clientY,i=t.clientX,o=e.getBoundingClientRect(),r=o.height,n=o.width,c=(i-o.x)/n,u=Object(f.a)(0,1,a.props.startValue,a.props.endValue,c);if("mousedown"===t.type)return a.setState({mouseIsDown:!0}),a.mouseDragStart={x:i,y:s},a.setState({currentValue:u,currentValuePercentage:100*c},(function(){return a.valueSavePercentage=c})),"samples"===a.props.stateProperty?a.getClosestPow2(u):u;if("mousemove"===t.type){if(a.state.mouseIsDown){a.mouseDragDeltasPercentage={x:(a.mouseDragStart.x-i)/n,y:(a.mouseDragStart.y-s)/r};var l=a.valueSavePercentage-a.mouseDragDeltasPercentage.x,m=a.props.startValue+(a.props.endValue-a.props.startValue)*l;return a.setState({currentValue:m,currentValuePercentage:100*l}),"samples"===a.props.stateProperty?a.getClosestPow2(m):m}return"samples"===a.props.stateProperty?a.getClosestPow2(a.state.currentValue):a.state.currentValue}return"mouseup"===t.type||"mouseleave"===t.type?(a.setState({mouseIsDown:!1}),"samples"===a.props.stateProperty?a.getClosestPow2(a.state.currentValue):a.state.currentValue):void 0},a.state={currentValue:a.props.currentValue,currentValuePercentage:Object(f.a)(a.props.startValue,a.props.endValue,0,100,a.props.currentValue),mouseIsDown:!1},a.mouseDragStart={},a.mouseDragDeltasPercentage={},a.valueSavePercentage=0,a}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this;return i.a.createElement("div",{onClick:this.props.audio&&this.props.changeHandlerAudio,onMouseDown:function(e){t.props.audio||t.props.changeHandler(t.props.stateProperty,t.dragAndDrop(e))},onMouseMove:function(e){t.props.audio||t.props.changeHandler(t.props.stateProperty,t.dragAndDrop(e))},onMouseUp:function(e){t.props.audio||t.props.changeHandler(t.props.stateProperty,t.dragAndDrop(e))},onMouseLeave:function(e){t.props.audio||t.props.changeHandler(t.props.stateProperty,t.dragAndDrop(e))},className:"progressBar"},i.a.createElement("div",{className:"currentTime"}," ","string"===typeof this.props.currentValue?this.props.currentValue:this.props.currentValue.toFixed(2)),i.a.createElement("div",{className:"totalTime"},this.props.endValue),i.a.createElement("div",{style:{width:"".concat(this.state.currentValuePercentage||this.props.audioCurrentValuePercentage,"%")},className:this.props.audio?"timeProgression tp-audio":"timeProgression"}))}}]),e}(s.Component),k=a(82),T=(a(233),a(12)),y=a.n(T),E=a(48),w=a.n(E),D=a(83),N=a.n(D),b=a(49),I=a.n(b),P=a(84),V=a.n(P),C=a(85),x=a.n(C),A=a(86),j=a.n(A),L=a(87),M=a.n(L),O=a(88),z=a.n(O),R=a(89),F=a.n(R),B=a(90),H=a.n(B),U=a(91),G=a.n(U),J=a(92),W=a.n(J),Y=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(m.a)(e).call(this,t))).storeState=function(){localStorage.setItem("volume",a.state.volume),localStorage.setItem("activeTrack",a.state.activeTrack)},a.setStateToLocalStorage=function(){localStorage.getItem("volume")&&localStorage.getItem("activeTrack")&&a.setState({volume:JSON.parse(localStorage.getItem("volume")),activeTrack:JSON.parse(localStorage.getItem("activeTrack"))},(function(){a.state.audios&&a.state.audios.forEach((function(t){return t.setVolume(a.state.volume)}))}))},a.formatTime=function(t){t=parseInt(t);var e=parseInt(t/60),a=t-60*(e=e<10?"0"+e.toString():e.toString());return e+":"+(a=a<10?"0"+a.toString():a.toString())},a.getSongsDuration=function(){var t=a.state.musicData;a.state.musicData.forEach((function(e,a){var s=new Audio(t[a].file);t[a].duration=s.duration})),a.setState({musicData:t})},a.getData=function(){a.setState({musicData:k})},a.sketch=function(t){var e,s,i;t.preload=function(){a.state.musicData.forEach((function(e,s){a.audios.push(t.loadSound(a.audioSources[s])),a.covers.push(t.loadImage(a.coverSources[s]))}))},t.setup=function(){a.setState({fileIsLoaded:!0,audios:a.audios},(function(){a.setStateToLocalStorage(),a.getCoverColor()}));var s=a.$visualizer.current.getBoundingClientRect(),i=s.width,o=s.height;a.setState({canvasSize:{width:i,height:o},visRadius:1*i/2/2}),t.createCanvas(i,o).parent("canvasContainer"),e=new g.a.FFT(a.state.smoothing,a.state.samples),t.frameRate(60)},t.draw=function(){a.smoothingSave!==a.state.smoothing&&(e=new g.a.FFT(a.state.smoothing,a.state.samples),a.smoothingSave=a.state.smoothing),a.samplesSave!==a.state.samples&&(e=new g.a.FFT(a.state.smoothing,a.state.samples),a.samplesSave=a.state.samples),t.angleMode(t.DEGREES),t.clear(),t.noStroke(),s=e.analyze(),i=e.waveform(),t.translate(a.state.canvasSize.width/2,a.state.canvasSize.height/2),t.rotate(-20),(s=s.slice(0,Math.floor(s.length*(2/3)))).forEach((function(e,i){var o=t.map(i,0,s.length,0,360),r=t.map(e,0,255,1.1*a.state.visRadius,a.state.canvasSize.width*a.state.amplitude);t.fill(a.state.coverColor),t.push(),t.rotate(o),t.rect(0,0,9,r),t.pop()})),t.beginShape(),s.forEach((function(e,o){var r=t.map(o,0,s.length,0,360),n=t.map(i[o],-1,1,1,1.05),c=a.state.visRadius*n*1.05,u=t.cos(r)*c,l=t.sin(r)*c;t.vertex(u,l),t.fill("#16191D"),t.ellipse(0,0,c,c)})),t.endShape()},t.windowResized=function(){var e=a.$visualizer.current.getBoundingClientRect(),s=e.width,i=e.height;a.setState({canvasSize:{width:s,height:i},visRadius:1*s/2/2}),t.resizeCanvas(s,i)}},a.toggleAudio=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"noparam";if("noparam"===e)t=a.state.activeTrack;else{t=e;var s=a.state.activeTrack;a.setState({activeTrack:e},(function(){a.getCoverColor(),s!==a.state.activeTrack&&a.state.audios[s].stop()}))}a.state.fileIsLoaded&&a.state.audios[t]&&(a.state.audios[t].isPlaying()?(a.state.audios[t].pause(),a.forceUpdate()):(a.state.audios[t].play(),a.forceUpdate()))},a.dragAndDrop=function(t){var e=t.currentTarget,s=t.clientY,i=e.getBoundingClientRect(),o=i.height,r=1-(s-i.y)/o;"mousedown"===t.type?(a.setState({mouseIsDown:!0}),a.mouseDragStart=s,a.setState({volume:r},(function(){a.state.audios.forEach((function(t){return t.setVolume(a.state.volume)})),a.startVolume=a.state.volume}))):"mousemove"===t.type&&a.state.mouseIsDown?(a.mouseDragDeltas=(a.mouseDragStart-s)/o,a.setState({volume:a.startVolume+a.mouseDragDeltas},(function(){return a.state.audios.forEach((function(t){return t.setVolume(a.state.volume)}))}))):"mouseup"!==t.type&&"mouseleave"!==t.type||a.setState({mouseIsDown:!1})},a.getCoverColor=function(){h.from(a.coverSources[a.state.activeTrack]).getPalette().then((function(t){return a.setState({coverColor:t.LightVibrant.getRgb()})}))},a.changeSongMoment=function(t){var e=t.currentTarget,s=t.clientX,i=e.getBoundingClientRect(),o=i.width,r=s-i.x;r/=o,a.state.audios[a.state.activeTrack]&&(a.state.audios[a.state.activeTrack].stop(),setTimeout((function(){var t=parseInt(r*a.state.audios[a.state.activeTrack].duration());a.setState({currentMusicTime:t}),a.state.audios[a.state.activeTrack].jump(t),a.state.audios[a.state.activeTrack].fade(a.state.volume,2)}),10))},a.changeSong=function(t){if(a.state.currentMusicTime>3&&"previous"===t)return a.state.audios[a.state.activeTrack].stop(),void setTimeout((function(){a.setState({currentMusicTime:0}),a.state.audios[a.state.activeTrack].jump(0)}),10);var e="previous"===t&&a.state.activeTrack>=1,s="next"===t&&a.state.activeTrack<a.state.musicData.length-1;a.setState((function(t){return e?{activeTrack:t.activeTrack-1}:s?{activeTrack:t.activeTrack+1}:void 0}),(function(){(s||e)&&(a.getCoverColor(),s?(a.state.audios[a.state.activeTrack-1].stop(),a.state.audios[a.state.activeTrack].play()):e&&(a.state.audios[a.state.activeTrack+1].stop(),a.state.audios[a.state.activeTrack].play()))}))},a.playlistSwitch=function(){"nowPlaying"===a.state.activeScreen?a.setState({activeScreen:"playlist"}):a.setState({activeScreen:"nowPlaying"})},a.optionSwitch=function(t){a.setState((function(t){return{displayOptions:!t.displayOptions}}))},a.keyboardEventsHandler=function(){window.addEventListener("keydown",(function(t){if(a.state.audios[a.state.activeTrack])switch(t.code){case"Space":a.toggleAudio();break;case"ArrowRight":a.changeSong("next");break;case"ArrowLeft":a.changeSong("previous");break;case"ArrowUp":a.state.volume>=.95?a.setState({volume:1},(function(){return a.state.audios[a.state.activeTrack].setVolume(a.state.volume)})):a.setState((function(t){return{volume:t.volume+.05}}),(function(){return a.state.audios[a.state.activeTrack].setVolume(a.state.volume)}));break;case"ArrowDown":a.state.volume<=.05?a.setState({volume:0}):a.setState((function(t){return{volume:t.volume-.05}}))}}))},a.updateStateFromSlider=function(t,e){a.setState(Object(n.a)({},t,e))},a.state={visualizer:"",visRadius:"",musicData:"",canvasSize:{width:"",height:""},fileIsLoaded:!1,activeTrack:0,activeScreen:"nowPlaying",displayOptions:!1,currentMusicTime:0,volume:.4,audios:[],coverColor:"white",mouseIsDown:!1,smoothing:.8,samples:256,amplitude:.4},a.smoothingSave=a.state.smoothing,a.samplesSave=a.state.samples,a.$visualizer=i.a.createRef(),a.audios=[],a.covers=[],a.coverSources=[x.a,j.a,M.a,z.a],a.audioSources=[F.a,H.a,G.a,W.a],a.mouseDragStart={},a.mouseDragDeltas={},a.startVolume=a.state.volume,a.increment=.5,a}return Object(d.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.getData(),this.setState({visualizer:new g.a(this.sketch)},this.keyboardEventsHandler),this.interval=setInterval((function(){t.state.audios[t.state.activeTrack]&&t.state.audios[t.state.activeTrack].isPlaying()&&t.setState({currentMusicTime:parseInt(t.state.audios[t.state.activeTrack].currentTime())})}),10),this.loadingInterval=setInterval((function(){t.increment=t.increment>3.9?.8:t.increment+.1,t.setState({loadingInc:t.increment})}),100)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval),clearInterval(this.loadingInterval)}},{key:"componentDidUpdate",value:function(){this.storeState(),this.state.fileIsLoaded&&clearInterval(this.loadingInterval)}},{key:"render",value:function(){var t,e,a,s,o,r=this,n=50;return this.state.musicData&&(t={backgroundImage:"url(".concat(this.coverSources[this.state.activeTrack],")"),backgroundSize:"cover",backgroundPosition:"center center"},e={backgroundImage:"url(".concat(this.coverSources[this.state.activeTrack],")"),backgroundSize:"auto 105%",backgroundPosition:"center center"},this.state.audios[this.state.activeTrack]&&(a={width:parseInt(this.state.currentMusicTime/this.state.audios[this.state.activeTrack].duration()*100)+"%"},n=100*-(1-this.state.volume),s={transform:"rotate(180deg) translateY(".concat(n,"%)"),transition:this.state.mouseIsDown?"none":"all 0.2s ease-in-out"})),this.state.musicData&&(o=this.state.musicData.map((function(t,e){return i.a.createElement("div",{key:e,className:"playlistElement"},i.a.createElement("img",{onClick:function(){r.toggleAudio(e)},alt:"cover",src:r.state.audios[e]&&r.state.audios[e].isPlaying()?w.a:y.a,className:"playButton"}),i.a.createElement("div",{className:"playlistWrap"},i.a.createElement("div",{className:"left"},i.a.createElement("div",{className:"artist"},t.artistName+" - "),i.a.createElement("div",{className:"dash"},"-"),i.a.createElement("div",{className:"title"},t.title)),i.a.createElement("div",{className:"duration"},r.state.audios[e]?r.formatTime(r.state.audios[e].duration()):t.duration),e===r.state.activeTrack&&i.a.createElement("div",{style:a,className:"timeProgression"})))}))),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"background"},i.a.createElement(p.CSSTransitionGroup,{transitionName:"bgTransition",transitionEnterTimeout:300,transitionLeaveTimeout:300},i.a.createElement("div",{key:this.state.activeTrack,style:t,className:"bgImage"})),i.a.createElement("div",{className:"bgFilter"})),i.a.createElement("div",{className:"musicPlayer"},i.a.createElement("div",{className:"visualizer"},i.a.createElement("div",{style:{display:"none"},id:"p5_loading",className:"loading"},"LOADING"),i.a.createElement("div",{className:this.state.fileIsLoaded?"loadingAnim load-off":"loadingAnim load-on"}),i.a.createElement("div",{ref:this.$visualizer,id:"canvasContainer"}),this.state.fileIsLoaded&&this.state.audios[this.state.activeTrack]&&(this.state.displayOptions?i.a.createElement("div",{className:"cover cover-options"},i.a.createElement(p.CSSTransitionGroup,{transitionName:"options",transitionAppear:!0,transitionAppearTimeout:300,transitionEnterTimeout:300,transitionLeaveTimeout:300},i.a.createElement("div",{key:this.state.activeTrack,className:"options-wrapper"},i.a.createElement("div",{className:"option"},i.a.createElement("div",{className:"option-txt"},"smoothing"),i.a.createElement(S,{startValue:0,endValue:1,stateProperty:"smoothing",currentValue:this.state.smoothing,changeHandler:this.updateStateFromSlider})),i.a.createElement("div",{className:"option"},i.a.createElement("div",{className:"option-txt"},"Samples"),i.a.createElement(S,{startValue:64,endValue:1024,stateProperty:"samples",currentValue:this.state.samples,changeHandler:this.updateStateFromSlider})),i.a.createElement("div",{className:"option"},i.a.createElement("div",{className:"option-txt"},"Amplitude"),i.a.createElement(S,{startValue:.3,endValue:.6,stateProperty:"amplitude",currentValue:this.state.amplitude,changeHandler:this.updateStateFromSlider}))))):i.a.createElement(p.CSSTransitionGroup,{transitionName:"cover",transitionAppear:!0,transitionAppearTimeout:300,transitionEnterTimeout:300,transitionLeaveTimeout:300},i.a.createElement("div",{key:this.state.activeTrack,style:e,className:"cover cover-img"}))),this.state.fileIsLoaded&&this.state.audios[this.state.activeTrack]&&i.a.createElement(p.CSSTransitionGroup,{transitionName:"switch",transitionAppear:!0,transitionAppearTimeout:300,transitionEnterTimeout:300,transitionLeaveTimeout:300},i.a.createElement("div",{key:this.state.activeTrack,onClick:this.optionSwitch,className:"optionSwitchButton"},i.a.createElement("img",{src:V.a,alt:"settings"})))),i.a.createElement("div",{className:"card"},"nowPlaying"===this.state.activeScreen?i.a.createElement("div",{className:"flex-wrap"},i.a.createElement("div",{className:"info"},i.a.createElement("div",{className:"artist"}," ",this.state.fileIsLoaded?this.state.musicData[this.state.activeTrack].artistName:"loading".concat(".".repeat(parseInt(this.state.loadingInc)))),i.a.createElement("div",{className:"album"},this.state.fileIsLoaded?this.state.musicData[this.state.activeTrack].album:"uwu"),i.a.createElement("div",{className:"title"},this.state.fileIsLoaded?this.state.musicData[this.state.activeTrack].title:"please wait")),i.a.createElement("div",{className:"controls"},i.a.createElement("img",{src:I.a,onClick:function(){r.changeSong("previous")},className:"before",alt:"before-button"}),i.a.createElement("img",{src:this.state.fileIsLoaded&&this.state.audios[this.state.activeTrack].isPlaying()?w.a:y.a,onClick:function(){r.toggleAudio()},className:"playPause",alt:"play music"}),i.a.createElement("img",{src:I.a,onClick:function(){r.changeSong("next")},className:"next",alt:"next-button"})),i.a.createElement(S,{audio:this.state.audios[this.state.activeTrack],startValue:this.formatTime(this.state.currentMusicTime),endValue:this.state.musicData&&this.state.audios[this.state.activeTrack]?this.formatTime(this.state.audios[this.state.activeTrack].duration()):"00:00",currentValue:this.formatTime(this.state.currentMusicTime),audioCurrentValuePercentage:this.state.musicData&&this.state.audios[this.state.activeTrack]?parseInt(this.state.currentMusicTime/this.state.audios[this.state.activeTrack].duration()*100):0,changeHandlerAudio:this.changeSongMoment})):o?i.a.createElement("div",{key:this.state.activeTrack,className:"playlist"},o):"loading",i.a.createElement("div",{onClick:this.playlistSwitch,className:"playlistSwitch"},"nowPlaying"===this.state.activeScreen?"PLAYLIST":"PLAYING NOW"),i.a.createElement("div",{onClick:this.dragAndDrop,onMouseDown:this.dragAndDrop,onMouseUp:this.dragAndDrop,onMouseMove:this.dragAndDrop,onMouseLeave:this.dragAndDrop,className:"volume"},i.a.createElement("img",{src:N.a,alt:"music symobl",className:"volumeIcon"}),i.a.createElement("div",{style:s,className:"volumeProgression"},i.a.createElement("div",{className:"volumePercentage"},100*this.state.volume<10?"0"+parseInt(100*this.state.volume):parseInt(100*this.state.volume),"%"))))))}}]),e}(s.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},48:function(t,e,a){t.exports=a.p+"static/media/pause.a83244f8.svg"},49:function(t,e,a){t.exports=a.p+"static/media/next.b4705597.svg"},82:function(t){t.exports=JSON.parse('[{"cover":"covers/cover01.jpg","file":"audios/audio01.mp3","artistName":"evigt morker","title":"h\xf6gre","album":"1"},{"cover":"covers/cover02.jpg","file":"audios/audio02.mp3","artistName":"park hye jin","title":"be a star","album":"Untitled"},{"cover":"covers/cover03.jpg","file":"audios/audio03.mp3","artistName":"kokoroko","title":"abusey junction","album":"we out here"},{"cover":"covers/cover04.jpg","file":"audios/audio04.mp3","artistName":"hiroshi yoshimura","title":"blink","album":"music for nine postcards"}]')},83:function(t,e,a){t.exports=a.p+"static/media/music.40b86523.svg"},84:function(t,e,a){t.exports=a.p+"static/media/settings.003ad3da.svg"},85:function(t,e,a){t.exports=a.p+"static/media/cover01.a75032b4.jpg"},86:function(t,e,a){t.exports=a.p+"static/media/cover02.06a64752.jpg"},87:function(t,e,a){t.exports=a.p+"static/media/cover03.a08f93da.jpg"},88:function(t,e,a){t.exports=a.p+"static/media/cover04.6130ea1f.jpg"},89:function(t,e,a){t.exports=a.p+"static/media/audio01.dc170e87.mp3"},90:function(t,e,a){t.exports=a.p+"static/media/audio02.04420354.mp3"},91:function(t,e,a){t.exports=a.p+"static/media/audio03.750bbe23.mp3"},92:function(t,e,a){t.exports=a.p+"static/media/audio04.95225891.mp3"},93:function(t,e,a){t.exports=a(234)}},[[93,1,2]]]);
//# sourceMappingURL=main.d0253ef7.chunk.js.map