(this["webpackJsonpaudio-player"]=this["webpackJsonpaudio-player"]||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/play.3d0531f4.svg"},220:function(e,t,a){},233:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),o=a(41),n=a.n(o),r=(a(96),a(75)),c=a(76),l=a(89),u=a(77),m=a(90),v=a(22),d=a.n(v),p=(a(97),a(78)),h=a(79),g=(a(220),a(10)),f=a.n(g),S=a(42),k=a.n(S),E=a(80),N=a.n(E),T=a(43),y=a.n(T),w=a(81),D=a.n(w),b=a(82),I=a.n(b),C=a(83),x=a.n(C),z=a(84),A=a.n(z),R=a(85),j=a.n(R),M=a(86),P=a.n(M),L=a(87),O=a.n(L),V=a(88),B=a.n(V),$=a(44),G=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).storeState=function(){localStorage.setItem("volume",a.state.volume),localStorage.setItem("activeTrack",a.state.activeTrack)},a.setLocalStorageState=function(){localStorage.getItem("volume")&&localStorage.getItem("activeTrack")&&a.setState({volume:JSON.parse(localStorage.getItem("volume")),activeTrack:JSON.parse(localStorage.getItem("activeTrack"))}),a.state.audios&&a.state.audios.forEach((function(e){return e.setVolume(a.state.volume)}))},a.formatTime=function(e){e=parseInt(e);var t=parseInt(e/60),a=e-60*(t=t<10?"0"+t.toString():t.toString());return t+":"+(a=a<10?"0"+a.toString():a.toString())},a.getSongsDuration=function(){var e=a.state.musicData;a.state.musicData.forEach((function(t,a){var s=new Audio(e[a].file);e[a].duration=s.duration})),a.setState({musicData:e})},a.getData=function(){a.setState({musicData:h})},a.sketch=function(e){var t,s,i;e.preload=function(){a.state.musicData.forEach((function(t,s){a.audios.push(e.loadSound(a.audioSources[s])),a.covers.push(e.loadImage(a.coverSources[s]))}))},e.setGradient=function(t,a,s,i,o,n,r){if(e.noFill(),"Y_AXIS"===r)for(var c=a;c<=a+i;c++){var l=e.map(c,a,a+i,0,1),u=e.lerpColor(o,n,l);e.stroke(u),e.line(t,c,t+s,c)}else if("X_AXIS"===r)for(var m=t;m<=t+s;m++){var v=e.map(m,t,t+s,0,1),d=e.lerpColor(o,n,v);e.stroke(d),e.line(m,a,m,a+i)}},e.setup=function(){a.getCoverColor(),a.setState({fileIsLoaded:!0,audios:a.audios});var s=a.$visualizer.current.getBoundingClientRect(),i=s.width,o=s.height;a.setState({canvasSize:{width:i,height:o},visRadius:1*i/2/2}),e.createCanvas(i,o).parent("canvasContainer"),t=new d.a.FFT(a.state.smoothing,256),e.frameRate(60)},e.drawA=function(){e.angleMode(e.DEGREES),e.clear(),e.noStroke(),s=t.analyze(),i=t.waveform(),e.translate(a.state.canvasSize.width/2,a.state.canvasSize.height/2),e.rotate(60),e.beginShape(),0===s[s.length-1]&&e.vertex(a.state.visRadius,0),s.forEach((function(t,i){var o=e.map(i,0,s.length,0,360),n=e.map(t,0,255,a.state.visRadius,.6*a.state.canvasSize.width),r=n*e.cos(o),c=n*e.sin(o);e.fill(a.state.coverColor),e.vertex(r,c)})),e.endShape(),e.beginShape(),s.forEach((function(t,o){var n=e.map(o,0,s.length,0,360),r=e.map(i[o],-1,1,1,1.05),c=a.state.visRadius*r*1.05,l=e.cos(n)*c,u=e.sin(n)*c;e.vertex(l,u),e.fill("#16191D"),e.ellipse(0,0,c,c)})),e.endShape()},e.draw=function(){e.angleMode(e.DEGREES),e.clear(),e.noStroke(),s=t.analyze(),i=t.waveform(),e.translate(a.state.canvasSize.width/2,a.state.canvasSize.height/2),e.rotate(-20),(s=s.slice(0,Math.floor(s.length*(2/3)))).forEach((function(t,i){var o=e.map(i,0,s.length,0,360),n=e.map(t,0,255,1.1*a.state.visRadius,.4*a.state.canvasSize.width);e.cos(o),e.sin(o);e.fill(a.state.coverColor),e.noStroke(),e.push(),e.rotate(o),e.rect(0,0,9,n),e.pop()})),e.beginShape(),s.forEach((function(t,o){var n=e.map(o,0,s.length,0,360),r=e.map(i[o],-1,1,1,1.05),c=a.state.visRadius*r*1.05,l=e.cos(n)*c,u=e.sin(n)*c;e.vertex(l,u),e.fill("#16191D"),e.ellipse(0,0,c,c)})),e.endShape()},e.windowResized=function(){var t=a.$visualizer.current.getBoundingClientRect(),s=t.width,i=t.height;a.setState({canvasSize:{width:s,height:i},visRadius:2*s/3/2}),e.resizeCanvas(s,i)}},a.toggleAudio=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"noparam";"noparam"===t?e=a.state.activeTrack:(e=t,a.setState({activeTrack:t})),a.state.audios.forEach((function(t,a){a!==e&&(t.jump(0),t.stop())})),a.state.fileIsLoaded&&a.state.audios[e]&&(a.state.audios[e].isPlaying()?(a.state.audios[e].pause(),a.setState((function(e){return{audios:e.audios}}))):(a.state.audios[e].play(),a.setState((function(e){return{audios:e.audios}}))))},a.dragAndDrop=function(e){var t=e.target,s=e.clientY,i=e.clientX,o=t.getBoundingClientRect(),n=o.height,r=o.width;"mousedown"===e.type?(a.upDownDelay=new Date,setTimeout((function(){a.setState({mouseIsDown:!0})}),200),a.mouseDragStart={x:i,y:s},a.startVolume=a.changeVolume(e)):"mousemove"===e.type&&a.state.mouseIsDown?(a.mouseDragDeltas={x:(a.mouseDragStart.x-i)/r,y:(a.mouseDragStart.y-s)/n},a.setState({volume:a.startVolume+a.mouseDragDeltas.y})):"mouseup"!==e.type&&"mouseleave"!==e.type||(new Date-a.upDownDelay<300?setTimeout((function(){a.setState({mouseIsDown:!1})}),200):a.setState({mouseIsDown:!1}))},a.changeVolume=function(e){var t=e.target,s=e.clientY,i=t.getBoundingClientRect(),o=i.height,n=s-i.y;return n=1-(n/=o),a.setState({volume:n}),a.state.audios.forEach((function(e){e.setVolume(n)})),n},a.getCoverColor=function(){p.from(a.coverSources[a.state.activeTrack]).getPalette().then((function(e){return a.setState({coverColor:e.LightVibrant.getRgb()})}))},a.changeSongMoment=function(e){var t=e.target,s=e.clientX,i=t.getBoundingClientRect(),o=i.width,n=s-i.x;n/=o,a.state.audios[a.state.activeTrack]&&(a.state.audios[a.state.activeTrack].stop(),setTimeout((function(){var e=parseInt(n*a.state.audios[a.state.activeTrack].duration());a.setState({currentMusicTime:e}),a.state.audios[a.state.activeTrack].jump(e),a.state.audios[a.state.activeTrack].fade(a.state.volume,2)}),10))},a.changeSong=function(e){if(a.state.currentMusicTime>3&&"previous"===e)return a.state.audios[a.state.activeTrack].stop(),void setTimeout((function(){a.setState({currentMusicTime:0}),a.state.audios[a.state.activeTrack].jump(0)}),10);var t="previous"===e&&a.state.activeTrack>=1,s="next"===e&&a.state.activeTrack<a.state.musicData.length-1;a.setState((function(e){return t?{activeTrack:e.activeTrack-1}:a.state.musicData&&s?{activeTrack:e.activeTrack+1}:void 0})),setTimeout((function(){(s||t)&&(a.getCoverColor(),a.state.audios.forEach((function(e,i){s?i!==a.state.activeTrack?(e.jump(0),e.stop()):(e.jump(0),e.fade(a.state.volume,5)):t&&(i!==a.state.activeTrack?(e.jump(0),e.stop()):(e.jump(0),e.fade(a.state.volume,5)))})))}),150)},a.playlistSwitch=function(){"nowPlaying"===a.state.activeScreen?a.setState({activeScreen:"playlist"}):a.setState({activeScreen:"nowPlaying"})},a.optionSwitch=function(){a.setState((function(e){return{displayOptions:!e.displayOptions}}))},a.keyboardEventsHandler=function(){window.addEventListener("keydown",(function(e){if(a.state.audios[a.state.activeTrack])switch(e.code){case"Space":a.toggleAudio();break;case"ArrowRight":a.changeSong("next");break;case"ArrowLeft":a.changeSong("previous");break;case"ArrowUp":a.state.volume>=.95?a.setState({volume:1}):a.setState((function(e){return{volume:e.volume+.05}}));break;case"ArrowDown":a.state.volume<=.05?a.setState({volume:0}):a.setState((function(e){return{volume:e.volume-.05}}))}}))},a.state={visualizer:"",visRadius:"",musicData:"",canvasSize:{width:"",height:""},fileIsLoaded:!1,activeTrack:0,activeScreen:"nowPlaying",displayOptions:!1,currentMusicTime:0,volume:.4,audios:[],coverColor:"white",mouseIsDown:!1,smoothing:.8},a.visRadiusCopy=0,a.$visualizer=i.a.createRef(),a.$cover=i.a.createRef(),a.audios=[],a.covers=[],a.coverSources=[D.a,I.a,x.a,A.a],a.audioSources=[j.a,P.a,O.a,B.a],a.mouseDragStart={},a.mouseDragDeltas={},a.startVolume=a.state.volume,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setLocalStorageState(),this.getData(),this.setState({visRadius:2*this.$visualizer.current.getBoundingClientRect().width/3/2,visualizer:new d.a(this.sketch)}),this.keyboardEventsHandler(),this.interval=setInterval((function(){e.state.audios[e.state.activeTrack]&&e.state.audios[e.state.activeTrack].isPlaying()&&e.setState({currentMusicTime:parseInt(e.state.audios[e.state.activeTrack].currentTime())})}),10)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidUpdate",value:function(){this.storeState()}},{key:"render",value:function(){var e,t,a,s,o=this,n=50;return this.state.musicData&&(e={backgroundImage:"url(".concat(this.coverSources[this.state.activeTrack],")"),backgroundSize:"auto 105%",backgroundPosition:"center center"},this.state.audios[this.state.activeTrack]&&(t={width:parseInt(this.state.currentMusicTime/this.state.audios[this.state.activeTrack].duration()*100)+"%"},n=100*-(1-this.state.volume),a={transform:"rotate(180deg) translateY(".concat(n,"%)"),transition:this.state.mouseIsDown?"none":"transform 0.2s ease-in-out"})),this.state.musicData&&(s=this.state.musicData.map((function(e,a){return i.a.createElement("div",{key:a,className:"playlistElement"},i.a.createElement("img",{onClick:function(){o.toggleAudio(a)},alt:"cover",src:o.state.audios[a]&&o.state.audios[a].isPlaying()?k.a:f.a,className:"playButton"}),i.a.createElement("div",{className:"playlistWrap"},i.a.createElement("div",{className:"left"},i.a.createElement("div",{className:"artist"},e.artistName+" - "),i.a.createElement("div",{className:"dash"},"-"),i.a.createElement("div",{className:"title"},e.title)),i.a.createElement("div",{className:"duration"},o.state.audios[a]?o.formatTime(o.state.audios[a].duration()):e.duration),a===o.state.activeTrack?i.a.createElement("div",{style:t,className:"timeProgression"}):""))}))),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"background"},i.a.createElement($.CSSTransitionGroup,{transitionName:"bgTransition",transitionEnterTimeout:300,transitionLeaveTimeout:300},i.a.createElement("div",{key:this.state.activeTrack,style:e,className:"bgImage"})),i.a.createElement("div",{className:"bgFilter"})),i.a.createElement("div",{className:"musicPlayer"},i.a.createElement("div",{className:"visualizer"},i.a.createElement("div",{style:{display:"none"},id:"p5_loading",className:"loading"},"LOADING"),i.a.createElement("div",{className:this.state.fileIsLoaded?"loadingAnim load-off":"loadingAnim load-on"}),i.a.createElement("div",{ref:this.$visualizer,id:"canvasContainer"}),this.state.fileIsLoaded&&this.state.audios[this.state.activeTrack]?this.state.displayOptions?i.a.createElement("div",{onClick:this.optionSwitch,ref:this.$cover,key:this.state.activeTrack,className:"cover cover-options"},i.a.createElement("div",{className:"options-wrapper"},i.a.createElement("div",{className:"option option-smoothing"},i.a.createElement("div",{className:"title"},"Smoothing"),i.a.createElement("div",{className:"bar"},i.a.createElement("div",{className:"progressBar"}),i.a.createElement("div",{className:"startValue"},"0"),i.a.createElement("div",{className:"endValue"},"1"))),i.a.createElement("div",{className:"option option-size"},i.a.createElement("div",{className:"title"},"Max size"),i.a.createElement("div",{className:"bar"},i.a.createElement("div",{className:"progressBar"}),i.a.createElement("div",{className:"startValue"},"120"),i.a.createElement("div",{className:"endValue"},"180"))),i.a.createElement("div",{className:"option option-freq"},i.a.createElement("div",{className:"title"},"frequency broadness"),i.a.createElement("div",{className:"bar"},i.a.createElement("div",{className:"progressBar"}),i.a.createElement("div",{className:"startValue"},"64"),i.a.createElement("div",{className:"endValue"},"1024"))))):i.a.createElement($.CSSTransitionGroup,{transitionName:"cover",transitionAppear:!0,transitionAppearTimeout:500,transitionEnterTimeout:500,transitionLeaveTimeout:300},i.a.createElement("div",{onClick:this.optionSwitch,ref:this.$cover,key:this.state.activeTrack,style:e,className:"cover cover-img"})):""),i.a.createElement("div",{className:"card"},"nowPlaying"===this.state.activeScreen?i.a.createElement("div",{className:"flex-wrap"},i.a.createElement("div",{className:"info"},i.a.createElement("div",{className:"artist"},this.state.musicData?this.state.musicData[this.state.activeTrack].artistName:"artist"),i.a.createElement("div",{className:"album"},this.state.musicData?this.state.musicData[this.state.activeTrack].album:"album"),i.a.createElement("div",{className:"title"},this.state.musicData?this.state.musicData[this.state.activeTrack].title:"title")),i.a.createElement("div",{className:"controls"},i.a.createElement("img",{src:y.a,onClick:function(){o.changeSong("previous")},className:"before",alt:"before-button"}),i.a.createElement("img",{src:this.state.fileIsLoaded&&this.state.audios[this.state.activeTrack].isPlaying()?k.a:f.a,onClick:function(){o.toggleAudio()},className:"playPause",alt:"play music"}),i.a.createElement("img",{src:y.a,onClick:function(){o.changeSong("next")},className:"next",alt:"next-button"})),i.a.createElement("div",{onClick:this.changeSongMoment,className:"progressBar"},i.a.createElement("div",{className:"actualTime"},this.formatTime(this.state.currentMusicTime)),i.a.createElement("div",{className:"totalTime"},this.state.musicData&&this.state.audios[this.state.activeTrack]?this.formatTime(this.state.audios[this.state.activeTrack].duration()):"00:00"),i.a.createElement("div",{style:t,className:"timeProgression"}))):s?i.a.createElement("div",{key:this.state.activeTrack,className:"playlist"},s):"loading",i.a.createElement("div",{onClick:this.playlistSwitch,className:"playlistSwitch"},"nowPlaying"===this.state.activeScreen?"PLAYLIST":"PLAYING NOW"),i.a.createElement("div",{onMouseDown:this.dragAndDrop,onMouseUp:this.dragAndDrop,onMouseMove:this.dragAndDrop,onMouseLeave:this.dragAndDrop,className:"volume"},i.a.createElement("img",{src:N.a,alt:"music symobl",className:"volumeIcon"}),i.a.createElement("div",{style:a,className:"volumeProgression"},i.a.createElement("div",{className:"volumePercentage"},parseInt(100*this.state.volume),"%"))))))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(i.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},42:function(e,t,a){e.exports=a.p+"static/media/pause.a83244f8.svg"},43:function(e,t,a){e.exports=a.p+"static/media/next.b4705597.svg"},79:function(e){e.exports=JSON.parse('[{"cover":"covers/cover01.jpg","file":"audios/audio01.mp3","artistName":"evigt morker","title":"h\xf6gre","album":"1"},{"cover":"covers/cover02.jpg","file":"audios/audio02.mp3","artistName":"park hye jin","title":"be a star","album":"Untitled"},{"cover":"covers/cover03.jpg","file":"audios/audio03.mp3","artistName":"kokoroko","title":"abusey junction","album":"we out here"},{"cover":"covers/cover04.jpg","file":"audios/audio04.mp3","artistName":"hiroshi yoshimura","title":"blink","album":"music for nine postcards"}]')},80:function(e,t,a){e.exports=a.p+"static/media/music.40b86523.svg"},81:function(e,t,a){e.exports=a.p+"static/media/cover01.1845849d.jpg"},82:function(e,t,a){e.exports=a.p+"static/media/cover02.19f85108.jpg"},83:function(e,t,a){e.exports=a.p+"static/media/cover03.83d85b4c.jpg"},84:function(e,t,a){e.exports=a.p+"static/media/cover04.b93229bb.jpg"},85:function(e,t,a){e.exports=a.p+"static/media/audio01.dc170e87.mp3"},86:function(e,t,a){e.exports=a.p+"static/media/audio02.04420354.mp3"},87:function(e,t,a){e.exports=a.p+"static/media/audio03.750bbe23.mp3"},88:function(e,t,a){e.exports=a.p+"static/media/audio04.95225891.mp3"},91:function(e,t,a){e.exports=a(233)},96:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.3fbc5273.chunk.js.map